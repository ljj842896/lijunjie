!function(){var e=function(e){this.pressKey=e.pressKey||0,this.playType=e.playType||"hover",this.bounceTime=e.bounceTime||1e3,this.pianoSize=e.pianoSize,this.keyGap=e.keyGap||10,this.keySize=e.keySize,this.con=e.con,this.keyImgArr=this.con.find("li"),this.pianoEle=this.con.find("ul"),this.keyArr=[],this.setup()},t=function(e){this.key=e.key,this.piano=e.piano,this.keyImg=e.keyImg,this.pressClass=e.pressClass||"press",this.state=null,this.setup()};e.prototype={constructor:e,putKey:function(){for(var e=this,o=0;o<e.keyImgArr.length;o++)e.keyArr.push(new t({piano:e,key:o,keyImg:e.keyImgArr[o]}))},setPiano:function(){var e=this;e.con.append(e.pianoEle)},play:function(){for(var e=0;e<this.keyArr.length;e++)this.keyArr[e].play()},setup:function(){this.keySpace=(this.pianoSize-this.keySize)/(this.keyImgArr.length-1),this.putKey(),this.play(),this.setPiano()}},t.prototype={constructor:t,press:function(){var e=this;e.state="press",e.keyEle.stop().animate({left:e.pressPosition+"px"},500)},bounce:function(){var e=this;e.state="bounce",e.keyEle.stop().animate({left:e.bouncePosition+"px"},500)},play:function(){var e=this;e.key<=e.piano.pressKey?"bounce"!=e.state&&e.bounce():"press"!=e.state&&e.press(),e.piano.pressKey!=e.key&&e.keyEle.addClass("press")},setup:function(){var e=this;e.pressPosition=e.piano.keySize+(e.key-1)*e.piano.keySpace,e.bouncePosition=e.key*e.piano.keySpace,e.keyEle=$(e.keyImg),e.keyEle.on(e.piano.playType,function(){e.piano.pressKey=e.key,e.keyEle.removeClass("press"),e.piano.play()}).appendTo(e.piano.pianoEle),0!=e.key&&(e.keyEle.css("padding-left",e.piano.keyGap+"px"),e.bouncePosition-=5)}};var o={bannerSlider:function(){for(var e,t,o=$(".banner"),a=$(".banner-slider"),i=$(".slider-left"),n=$(".slider-right"),l="item-active",r=4e3,s=a.find("li").length,d=$('<ol class="banner-item"></ol>'),p=0,c=0,u=function(e,t){c%2||(c++,a.find("li").eq(e).stop().fadeOut(),p=t,a.find("li").eq(p).stop().fadeIn(),setTimeout(function(){c++},200),d.find("li").removeClass(l).eq(p).addClass(l))},m=0;s>m;m++)t=$("<li></li>"),d.append(t),t.on("click",function(e){return function(){u(p,e)}}(m));o.append(d),d.find("li").eq(p).addClass(l),a.find("li").eq(p).show(),e=setInterval(function(){u(p,p>=s-1?0:p+1)},r),i.click(function(){u(p,0>=p?s-1:p-1)}),n.click(function(){u(p,p>=s-1?0:p+1)})},moduleMove:function(){for(var t=0;t<$(".category-recommend-1").length;t++)new e({pianoSize:1080,keySize:620,con:$(".category-recommend-1").eq(t)})},getMore:function(e){{var t=this,o=$("#moreModule");$(".category")}t.moduleState=0,$.ajax({type:"get",url:ControllerSite+"/home/getMoreModule",data:e,contentType:"application/json",dataType:"json",success:function(a){if(a.success){for(var i,n=0;n<a.data.modules.length;n++)4!=a.data.modules[n].moduleType&&5!=a.data.modules[n].moduleType&&7!=a.data.modules[n].moduleType&&(i=t.getModuleEle(a.data.modules[n]),o.before(i));e.pageIndex>=a.data.pageCount?o.remove():(e.pageIndex++,t.moduleState=1)}else o.html(a.error.message)},error:function(){o.html("网络请求失败！")}})},getModuleEle:function(t){var o,a,i,n,l,r=this;switch(t.moduleType){case"1":a=$('<div class="category-recommend-1"></div>'),i=$('<div class="category-title"><p>'+t.moduleInfo.moduleTitle+"</p></div>"),n=$('<ul class="clearfix"></ul>');for(var s=0;s<t.moduleInfo.moduleItems.length;s++)o=t.moduleInfo.moduleItems[s],l=$('<li><a target="_blank" href="'+r.getJumpUrl(o)+'"><img src="'+o.pcImageUrl+'"/></a></li>'),1==t.moduleType&&l.find("a").append("<i></i>"),n.append(l);t.moduleInfo.moduleTitle&&a.append(i),a.append(n),new e({pianoSize:1080,keySize:620,con:a});break;case"2":a=$('<div class="category-recommend-2"></div>'),i=$('<div class="category-title"><p>'+t.moduleInfo.moduleTitle+"</p></div>"),n=$('<ul class="clearfix"></ul>');for(var s=0;s<t.moduleInfo.moduleItems.length;s++)o=t.moduleInfo.moduleItems[s],l=$('<li><a target="_blank" href="'+r.getJumpUrl(o)+'"><img src="'+o.pcImageUrl+'"/></a></li>'),1==t.moduleType&&l.find("a").append("<i></i>"),n.append(l);t.moduleInfo.moduleTitle&&a.append(i),a.append(n);break;case"3":a=$('<div class="category-recommend-3"></div>'),i=$('<div class="category-title"><p>'+t.moduleInfo.moduleTitle+"</p>"),i.append('<a target="_blank" href="'+r.getJumpUrl(t.moduleInfo)+'">查看全部 &gt;</a>'),n=$('<ul class="category-list clearfix"></ul>'),n.append('<li class="category-brand template3"><a target="_blank" href="'+r.getJumpUrl(t.moduleInfo)+'"><i><img src="'+t.moduleInfo.moduleImage+'"/></i><span>'+t.moduleInfo.manufacturers+"&nbsp;&nbsp;"+t.moduleInfo.moduleBrand+"</span></a></li>");for(var d=0;d<t.moduleInfo.moduleItems.length;d++)o=t.moduleInfo.moduleItems[d],n.append('<li><a target="_blank" href="'+r.getJumpUrl(o)+'"><i><img src="'+o.image+'"/></i><dl><dt>'+o.ext.itemName+"</dt><dd>¥"+o.ext.itemPrice+"</dd></dl></a></li>");a.append(i).append(n);break;case"6":a=$('<div class="category-recommend-3"></div>'),i=$('<div class="category-title"><p>'+t.moduleInfo.moduleTitle+"</p>"),i.append('<a target="_blank" href="'+r.getClickTypeJump(t)+'">查看全部 &gt;</a>'),n=$('<ul class="category-list clearfix"></ul>');for(var d=0;d<t.moduleInfo.moduleItems.length;d++)o=t.moduleInfo.moduleItems[d],n.append('<li><a target="_blank" href="'+r.getJumpUrl(o)+'"><i><img src="'+o.imageUrl+'"/></i><dl><dt>'+o.itemName+"</dt><dd>¥"+o.itemPrice+"</dd></dl></a></li>");a.append(i).append(n)}return a},getClickTypeJump:function(e){return window.ControllerSite+"/classify/guessYouLike.html?recommendType="+e.moduleInfo.modelId},getJumpUrl:function(e){var t;switch(Number(e.clickType)){case 1:t=window.ControllerSite+"/products/"+e.ext.suId+"-0.html";break;case 2:t=e.ext.url;break;case 3:t=window.ControllerSite+"/classify/supplier.html?supplierId="+e.ext.supplierID;break;case 4:t=window.ControllerSite+"/classify/category.html?categoryId="+e.ext.categoryID;break;case 5:t=window.ControllerSite+"/classify/saleList.html?type=1";break;case 6:t=window.ControllerSite+"/classify/saleList.html?type=2";break;case 7:t=window.ControllerSite+"/classify/newProduct.html";break;case 8:t=window.ControllerSite+"/classify/productGroup.html?productPolymerId="+e.ext.productAggregationId;break;case 9:t=window.ControllerSite+"/classify/categoryGroup.html?categoryPolymerId="+e.ext.categoryAggregationId;break;case 13:case 15:t=e.ext.url;break;case 16:t=window.ControllerSite+"/classify/newProduct.html?categoryAggregationId="+e.ext.categoryAggregationId;break;case 17:t="/answerKing/index.html"}return t},moduleLoad:function(){var e=$("#moreModule"),t={pageSize:10,pageIndex:2,platform:2,pvId:pvId},o=this;o.moduleState=1,e.length&&$(window).on("scroll",function(){($("body").scrollTop()||document.documentElement.scrollTop)-e.offset().top+$(window).height()>=0&&o.moduleState&&o.getMore(t)})},init:function(){this.bannerSlider(),this.moduleMove(),this.moduleLoad()}};$divnav=$("div.nav"),masterGuy.categoryBarScroll(550,550,function(){$divnav.removeClass("nav-index")},function(){$divnav.addClass("nav-index")}),masterGuy.rightBarPos(550),$(function(){o.init()})}();