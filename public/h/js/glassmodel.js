$(function(){var e={modelEle:$(".editor-model"),picEle:$(".editor-picture"),modelArr:newProduct.designData.suData.randerImg,modelBtn:$(".editor-toPic"),modelTurnBtn:$(".editor-return"),modelCon:$(".editor-model"),picImgArr:newProduct.designData.imgList,picBtn:$(".editor-toModel"),picLargeCon:$(".editor-picture").find("p"),picSelectClass:"main-active",picSmallCon:$(".editor-picture").find("ul")},a=new newProduct.PictureView(e);a.init();var t=function(e){newProduct.SpecsDetail.call(this,e),this.hypPDMax=e.hypPDMax,this.hypPDMin=e.hypPDMin,this.myoPDMax=e.myoPDMax,this.myoPDMin=e.myoPDMin};t.prototype=new newProduct.SpecsDetail,t.prototype.constructor=t,t.prototype.setActive=function(){var e=this;e.selectState=!0,l.setPDRange(e)},t.prototype.clickHandel=function(){var e=this;e.ele.click(function(){e.selectState||(e.dimensionObj.changeSelect(e),l.resetPDList())})};var s=function(e){this.titleEle=null,this.seriesName=e.seriesName||"通用镜片",this.con=e.con,this.activeClass=e.activeClass,this.childList=[],this.init()};s.prototype={constructor:s,addChild:function(e){var a=this;a.childList.push(e),e.callDad(a)},setActive:function(){var e=this;e.titleEle.addClass(e.activeClass)},removeActive:function(){var e=this;e.titleEle.removeClass(e.activeClass)},showChild:function(){for(var e=0;e<this.childList.length;e++)this.childList[e].conform&&this.childList[e].show();LT.scroll({oViweContainer:$(".stepTwo-main"),oPanelContainer:$(".stepTwo-main > ul"),oScrollContainer:$(".stepTwo-scrollCon"),oScrollBtn:$(".stepTwo-scrollCon span"),height:390,resetTop:!0,direction:"y"})},hideChild:function(){for(var e=0;e<this.childList.length;e++)this.childList[e].hide()},show:function(){this.showChild(),this.titleEle.show()},hide:function(){this.hideChild(),this.titleEle.hide()},screen:function(){var e,a=this;a.hide();for(var t=0;t<a.childList.length;t++)e=a.childList[t].screen(),1==e?(l.activeSerise=a,a.childList[t].setConform(),a.titleEle.show()):2==e?(a.childList[t].setConform(),a.titleEle.show(),!l.firstConform&&(l.firstConform=a.childList[t])):(3==e,a.childList[t].removeConform())},init:function(){var e=this;e.titleEle=$("<li>"+e.seriesName+"<i></i></li>"),e.titleEle.click(function(){l.activeSerise.hideChild(),l.activeSerise.removeActive(),l.activeSerise=e,e.showChild(),e.setActive();for(var a=0;a<e.childList.length;a++)if(e.childList[a].conform){e.childList[a].ele.trigger("click");break}}),e.con.append(e.titleEle)}};var i=function(e){newProduct.SpecsDetail.call(this,e),this.isPlain=e.isPlain,this.isSpecial=e.isSpecial,this.hypMin=e.hypMin,this.hypMax=e.hypMax,this.myoMin=e.myoMin,this.myoMax=e.myoMax,this.astMin=e.astMin,this.astMax=e.astMax,this.axiMin=e.axiMin,this.axiMax=e.axiMax,this.glassLabelName=e.glassLabelName,this.jpDes=e.jpDes,this.jpName=e.jpName,this.conform=!1};i.prototype=new newProduct.SpecsDetail,i.prototype.constructor=i,i.prototype.setConform=function(){this.conform=!0,this.ele.addClass("serise-confirm")},i.prototype.removeConform=function(){this.conform=!1,this.ele.removeClass("serise-confirm")},i.prototype.hide=function(){this.ele.hide()},i.prototype.show=function(){this.ele.show()},i.prototype.callDad=function(e){this.serise=e},i.prototype.screen=function(){var e=!0,a=this;return 3==l.state?!a.isPlain&&(e=!1):l.leftSPH.val*l.rightSPH.val==0?(l.leftSPH.val-0?l.leftSPH.val<0?(Math.abs(l.leftSPH.val)<a.myoMin||Math.abs(l.leftSPH.val)>a.myoMax)&&(e=!1):(l.leftSPH.val<a.hypMin||l.leftSPH.val>a.hypMax)&&(e=!1):l.rightSPH.val-0&&(l.rightSPH.val<0?(Math.abs(l.rightSPH.val)<a.myoMin||Math.abs(l.rightSPH.val)>a.myoMax)&&(e=!1):(l.rightSPH.val<a.hypMin||l.rightSPH.val>a.hypMax)&&(e=!1)),!(0==a.myoMin||0==a.hypMin)&&(e=!1),(0!=a.myoMin||0==a.myoMin&&0==a.myoMax)&&(0!=a.hypMin||0==a.hypMin&&0==a.hypMax)&&(e=!1)):l.leftSPH.val*l.rightSPH.val<0?a.isSpecial?(l.leftSPH.val<0?(Math.abs(l.leftSPH.val)<a.myoMin||Math.abs(l.leftSPH.val)>a.myoMax)&&(e=!1):(l.leftSPH.val<a.hypMin||l.leftSPH.val>a.hypMax)&&(e=!1),l.rightSPH.val<0?(Math.abs(l.rightSPH.val)<a.myoMin||Math.abs(l.rightSPH.val)>a.myoMax)&&(e=!1):(l.rightSPH.val<a.hypMin||l.rightSPH.val>a.hypMax)&&(e=!1)):e=!1:(l.leftSPH.val<0?(Math.abs(l.leftSPH.val)<a.myoMin||Math.abs(l.leftSPH.val)>a.myoMax)&&(e=!1):(l.leftSPH.val<a.hypMin||l.leftSPH.val>a.hypMax)&&(e=!1),l.rightSPH.val<0?(Math.abs(l.rightSPH.val)<a.myoMin||Math.abs(l.rightSPH.val)>a.myoMax)&&(e=!1):(l.rightSPH.val<a.hypMin||l.rightSPH.val>a.hypMax)&&(e=!1)),l.leftCYL.val&&((Math.abs(l.leftCYL.val)<a.astMin||Math.abs(l.leftCYL.val)>a.astMax)&&(e=!1),(Math.abs(l.leftAXIS.val)<a.axiMin||Math.abs(l.leftAXIS.val)>a.axiMax)&&(e=!1)),l.rightCYL.val&&((Math.abs(l.rightCYL.val)<a.astMin||Math.abs(l.rightCYL.val)>a.astMax)&&(e=!1),(Math.abs(l.rightAXIS.val)<a.axiMin||Math.abs(l.rightAXIS.val)>a.axiMax)&&(e=!1)),e?a.selectState?1:2:a.selectState?3:4};var l={leftSPH:{ele:$(".stepOne-leftSPH"),val:"",tableEle:$(".table-leftSPH")},rightSPH:{ele:$(".stepOne-rightSPH"),val:"",tableEle:$(".table-rightSPH")},PD:{ele:$(".stepOne-PD"),val:"",tableEle:$(".table-PD")},leftCYL:{ele:$(".stepOne-leftCYL"),val:"",tableEle:$(".table-leftCYL")},rightCYL:{ele:$(".stepOne-rightCYL"),val:"",tableEle:$(".table-rightCYL")},leftAXIS:{ele:$(".stepOne-leftAXIS"),val:"",tableEle:$(".table-leftAXIS"),state:0},rightAXIS:{ele:$(".stepOne-rightAXIS"),val:"",tableEle:$(".table-rightAXIS"),state:0},range:newProduct.designData.glassData.supportRange.glassRange,PDRange:{},SPHList:[],SPHArr:[],PDList:[],PDArr:[],CYLList:[],CYLArr:[],AXISList:[],AXISArr:[],degreeCon:$(".degreeLayer"),degreeBtn:$(".bottom-degree"),mattBtn:$(".bottom-matt"),closeBtn:$(".layer-main > i"),nextBtn:$(".degree-next"),lastBtn:$(".degree-last"),mainEle:$(".layer-main"),oneStepClass:"degreeStepOne",twoStepClass:"degreeStepTwo",threeStepClass:"degreeStepTwo degreeMatt",validClass:"select-valid",desableClass:"select-desable",validState:!0,state:null,seriesList:{},activeSerise:null,firstConform:null,resetSeries:function(){var e=this;e.firstConform=null,e.activeSerise&&e.activeSerise.removeActive(),e.activeSerise=null,n.setAble(),$(".stepTwo-detail > span").hide(),$(".stepTwo-series").parent().show();for(var a in e.seriesList)e.seriesList[a].screen();e.activeSerise?(e.activeSerise.setActive(),e.activeSerise.showChild()):e.firstConform?(e.activeSerise=e.firstConform.serise,e.activeSerise.setActive(),e.activeSerise.showChild(),e.firstConform.ele.trigger("click")):($(".stepTwo-series").parent().hide(),$(".stepTwo-detail > span").show(),n.setDesabel(),LT.scroll({oViweContainer:$(".stepTwo-main"),oPanelContainer:$(".stepTwo-main > ul"),oScrollContainer:$(".stepTwo-scrollCon"),oScrollBtn:$(".stepTwo-scrollCon span"),height:390,resetTop:!0,direction:"y"}))},setSPHList:function(){for(var e=this,a=e.range.myoMax;a>=e.range.myoMin;a-=.25)0!=a&&(e.SPHList.push({text:"-"+a.toFixed(2)+"（近视"+100*a+"度）",val:"-"+a.toFixed(2)}),e.SPHArr.push("-"+a.toFixed(2)));(0==e.range.myoMin&&0!=e.range.myoMax||0==e.range.hypMin&&0!=e.range.hypMax)&&(e.SPHList.push({text:"0.00 (平光)",val:"0.00"}),e.SPHArr.push("0.00"));for(var t=e.range.hypMin;t<=e.range.hypMax;t+=.25)0!=t&&(e.SPHList.push({text:"+"+t.toFixed(2)+"（远视"+100*t+"度）",val:"+"+t.toFixed(2)}),e.SPHArr.push("+"+t.toFixed(2)));e.leftSPH.ele.selectFn({data:e.SPHList,tips:"左眼度数",textField:"text",valueField:"val",maxRow:8,change:function(){var a=this;if(a.value>0)e.leftSPH.tableEle.html("远视"+100*a.value+"度");else if(a.value<0)e.leftSPH.tableEle.html("近视"+-100*a.value+"度");else if(0===parseFloat(a.value)){if(0===parseFloat(e.rightSPH.val))return LT.alertSmall("您选择的度数为0，如需购买平光镜，请点击按钮【购买平光】。"),void e.leftSPH.ele.setValue(e.leftSPH.val,!0);e.leftSPH.tableEle.html("平光")}e.leftSPH.val=a.value,e.removeError(e.leftSPH),e.resetPDList()}}),e.rightSPH.ele.selectFn({data:e.SPHList,tips:"右眼度数",textField:"text",valueField:"val",maxRow:8,change:function(){var a=this;if(a.value>0)e.rightSPH.tableEle.html("远视"+100*a.value+"度");else if(a.value<0)e.rightSPH.tableEle.html("近视"+-100*a.value+"度");else if(0===parseFloat(a.value)){if(0===parseFloat(e.leftSPH.val))return LT.alertSmall("您选择的度数为0，如需购买平光镜，请点击按钮【购买平光】。"),void e.rightSPH.ele.setValue(e.rightSPH.val,!0);e.rightSPH.tableEle.html("平光")}e.rightSPH.val=a.value,e.removeError(e.rightSPH),e.resetPDList()}})},resetPDList:function(){var e,a,t=this,s=[{text:"请选择",val:"请选择"}];if(t.PDArr=[],""!==t.leftSPH.val&&""!==t.rightSPH.val){t.leftSPH.val*t.rightSPH.val<0?(a=Math.max(t.PDRange.myoPDMin,t.PDRange.hypPDMin),e=Math.min(t.PDRange.myoPDMax,t.PDRange.hypPDMax)):parseFloat(t.leftSPH.val)+parseFloat(t.rightSPH.val)>0?(a=t.PDRange.hypPDMin,e=t.PDRange.hypPDMax):(a=t.PDRange.myoPDMin,e=t.PDRange.myoPDMax);for(var i=a;e>=i;i++)s.push({text:i,val:i}),t.PDArr.push(i)}this.PD.ele.setOptions(s),this.PD.ele.setValue("请选择",!0)},setPDRange:function(e){this.PDRange={hypPDMax:e.hypPDMax,hypPDMin:e.hypPDMin,myoPDMax:e.myoPDMax,myoPDMin:e.myoPDMin}},setPDList:function(){var e=this;e.PDList.push({text:"请选择",val:"请选择"}),e.PD.ele.selectFn({data:e.PDList,tips:null,textField:"text",valueField:"val",maxRow:8,change:function(){var a=this;e.PD.val=a.value,e.PD.tableEle.html(a.value),e.removeError(e.PD)}})},setCYLList:function(){for(var e=this,a=e.range.astMin;a<=e.range.astMax;a+=.25)0!=a&&(e.CYLList.push({text:"-"+a.toFixed(2)+"（散光"+100*a+"度）",val:"-"+a.toFixed(2)}),e.CYLArr.push("-"+a.toFixed(2)));e.leftCYL.ele.selectFn({data:e.CYLList,tips:"左眼散光（无）",textField:"text",valueField:"val",maxRow:5,change:function(){var a=this;e.leftCYL.val=a.value,e.leftCYL.tableEle.html(a.value?-100*a.value:"无"),!a.value&&e.leftAXIS.state?e.setDesable(e.leftAXIS):a.value&&!e.leftAXIS.state&&e.removeDesable(e.leftAXIS),e.leftCYL.val||e.rightCYL.val?$(".table-CYL,.table-AXIS").show():$(".table-CYL,.table-AXIS").hide()}}),e.rightCYL.ele.selectFn({data:e.CYLList,tips:"右眼散光（无）",textField:"text",valueField:"val",maxRow:5,change:function(){var a=this;e.rightCYL.val=a.value,e.rightCYL.tableEle.html(a.value?-100*a.value:"无"),!a.value&&e.rightAXIS.state?e.setDesable(e.rightAXIS):a.value&&!e.rightAXIS.state&&e.removeDesable(e.rightAXIS),e.leftCYL.val||e.rightCYL.val?$(".table-CYL,.table-AXIS").show():$(".table-CYL,.table-AXIS").hide()}})},setDesable:function(e){var a=this;e.state=0,e.ele.find(".sel_span").addClass(a.desableClass),e.ele.setValue("",!0),e.ele.on("click.desable",function(){e.ele.find(".sel_div").hide()})},removeDesable:function(e){var a=this;e.state=1,e.ele.find(".sel_span").removeClass(a.desableClass),e.ele.off("click.desable")},setAXISList:function(){for(var e=this,a=e.range.axiMin;a<=e.range.axiMax;a++)e.AXISList.push({text:a,val:a}),e.AXISArr.push(a);e.leftAXIS.ele.selectFn({data:e.AXISList,tips:"左眼轴位（无）",textField:"text",valueField:"val",maxRow:6,change:function(){var a=this;e.leftAXIS.val=a.value,e.leftAXIS.tableEle.html(a.value?a.value:"无"),e.removeError(e.leftAXIS)}}),e.rightAXIS.ele.selectFn({data:e.AXISList,tips:"右眼轴位（无）",textField:"text",valueField:"val",maxRow:6,change:function(){var a=this;e.rightAXIS.val=a.value,e.rightAXIS.tableEle.html(a.value?a.value:"无"),e.removeError(e.rightAXIS)}})},changeState:function(){var e=this;switch(this.mainEle.removeClass(e.oneStepClass).removeClass(e.threeStepClass),e.state){case 1:e.mainEle.addClass(e.oneStepClass);break;case 2:e.mainEle.addClass(e.twoStepClass),e.resetSeries();break;case 3:e.mainEle.addClass(e.threeStepClass),e.resetSeries()}},addError:function(e){var a=this;a.validState&&(a.validState=!1),e.ele.addClass(a.validClass)},removeError:function(e){var a=this;e.ele.removeClass(a.validClass)},valid:function(){var e=this;e.validState=!0,this.leftSPH.val||e.addError(e.leftSPH),this.rightSPH.val||e.addError(e.rightSPH),this.PD.val&&"请选择"!=this.PD.val||e.addError(e.PD),this.leftCYL.val&&!this.leftAXIS.val&&e.addError(e.leftAXIS),this.rightCYL.val&&!this.rightAXIS.val&&e.addError(e.rightAXIS)},close:function(){this.degreeCon.hide()},open:function(){this.degreeCon.show()},saveUserAction:function(){var e=this;$.ajax({url:ControllerSite+"/RequestAPI/setDegree",type:"post",dataType:"json",data:{profile_info:JSON.stringify({glasstype:1,sph_left:e.leftSPH.val,sph_right:e.rightSPH.val,pd_myopia:e.PD.val,cyl_left:e.leftCYL.val||0,cyl_right:e.rightCYL.val||0,axis_left:e.leftAXIS.val||-1,axis_right:e.rightAXIS.val||-1})},async:!1,success:function(){}})},getUserAction:function(){var e=this;$.ajax({url:ControllerSite+"/RequestAPI/getProfile",type:"post",dataType:"json",async:!1,success:function(a){if(a.success&&a.data.canUseRecommend){var t=a.data.profileInfo;e.SPHArr.indexOf(t.sph_left)>=0&&e.SPHArr.indexOf(t.sph_right)>=0&&(e.leftSPH.ele.setValue(t.sph_left,!0),e.rightSPH.ele.setValue(t.sph_right,!0),e.PDArr.indexOf(t.pd_myopia)&&e.PD.ele.setValue(t.pd_myopia,!0)),0!=t.cyl_left&&e.CYLArr.indexOf(t.cyl_left)>=0&&e.AXISArr.indexOf(Number(t.axis_left))>=0&&(e.leftCYL.ele.setValue(t.cyl_left,!0),e.leftAXIS.ele.setValue(t.axis_left,!0)),0!=t.axis_right&&e.CYLArr.indexOf(t.cyl_right)>=0&&e.AXISArr.indexOf(Number(t.axis_right))>=0&&(e.rightCYL.ele.setValue(t.cyl_right,!0),e.rightAXIS.ele.setValue(t.axis_right,!0))}}})},init:function(){var e=this;e.degreeBtn.click(function(){e.state=1,e.changeState(),e.resetPDList(),e.open()}),e.mattBtn.click(function(){e.open(),e.state=3,e.changeState()}),e.closeBtn.click(function(){e.close()}),e.nextBtn.click(function(){e.valid(),e.validState&&(e.state=2,e.changeState(),e.saveUserAction())}),e.lastBtn.click(function(){e.state=1,e.changeState()}),e.setSPHList(),e.setPDList(),e.setCYLList(),e.setAXISList(),e.setDesable(e.leftAXIS),e.setDesable(e.rightAXIS),e.getUserAction()}},n=new newProduct.ShopCar({addShopCarEle:$(".degree-shopCar"),addShopCarUrl:"/shopcars/addshopcar?",buyNowEle:$(".degree-buyNow"),buyNowUrl:"/shopcars/buyNow",desableClass:"shopCar-desable",priceEle:$(".panel-maney i,.degree-title b"),durationEle:$(".panel-duration span,.degree-title span"),addEle:$(".panel-add"),numEle:$(".panel-number"),minusEle:$(".panel-minus")});n.getParamsFn=function(){var e,a={};if(1==h.chooseData.storeStatus){a.su=h.chooseData.suId,a.num=n.num,e={glass_type:1,sph_left:3==l.state?0:l.leftSPH.val,sph_right:3==l.state?0:l.rightSPH.val,pd_myopia:3==l.state?0:l.PD.val,cyl_left:3==l.state?0:l.leftCYL.val||0,cyl_right:3==l.state?0:l.rightCYL.val||0,axis_left:3==l.state?-1:l.leftAXIS.val||-1,axis_right:3==l.state?-1:l.rightAXIS.val||-1,leg_sign_left:"",leg_sign_right:"",halitus_sign_left:"",halitus_sign_right:"",message:h.chooseData.jpName};for(var t in r.carveArr)"hqb"==r.carveArr[t].name&&(e.halitus_sign_left=r.carveArr[t].content),"leg"==r.carveArr[t].name&&(e.leg_sign_left=r.carveArr[t].content);a.extendInfo=JSON.stringify(e)}else LT.alertSmall("原材料库存不足"),a=!1;return a},n.setConsider({su:{price:newProduct.designData.suData.price,duration:newProduct.designData.suData.duration}}),n.init();var r=new newProduct.Carve({sleepEle:$(".design-sleep"),downEle:$(".design-sleep"),activeEle:$(".design-active"),upEle:$(".design-title")});r.init(),1==newProduct.designData.glassData.isHalitus&&($(".glassMain-hqb").addClass("glassMain-active"),r.addCarve({name:"hqb",duration:newProduct.designData.glassData.halitusInfo.duration,price:newProduct.designData.glassData.halitusInfo.price,centainBtn:$(".glassMain-hqb div i"),carveEle:$(".glassMain-hqb div input"),content:"",maxLength:3,placeHoder:"限3个大写字母或数字",successFn:function(e){n.setConsider({hqb:{price:e.content?e.price:0,duration:e.content?e.duration:0}})},validFn:function(e,a){if(e){if(e.match(/^[A-Z0-9]+$/))return LT.alertSmall("签名成功"),r.setUp(),!0;LT.alertSmall("仅支持大写字母或数字")}else{if(a)return LT.alertSmall("取消签名"),r.setUp(),!0;LT.alertSmall("请输入大写字母或数字")}}})),1==newProduct.designData.isCarve&&(1!=newProduct.designData.glassData.isHalitus&&$(".glassMain-leg").addClass("glassMain-active"),r.addCarve({name:"leg",duration:newProduct.designData.carveInfo.duration,price:newProduct.designData.carveInfo.price,centainBtn:$(".glassMain-leg div i"),carveEle:$(".glassMain-leg div input"),content:"",maxLength:6,placeHoder:"最多可输入6个字符",successFn:function(e){n.setConsider({leg:{price:e.content?e.price:0,duration:e.content?e.duration:0}})},validFn:function(e,a){if(e){if(e.match(/^[a-zA-Z0-9\s]+$/))return LT.alertSmall("签名成功"),r.setUp(),!0;LT.alertSmall("仅支持字母、数字或空格")}else{if(a)return LT.alertSmall("取消签名"),r.setUp(),!0;LT.alertSmall("请输入字母、数字或空格")}}}));var o,c,d,h=new newProduct.Specs({storeData:newProduct.designData.sizeDetail,sizeData:newProduct.designData.sizeList,con:$(".panel-specs>ul")});h.fileSelect(newProduct.designData.suData.specs);for(var p=0;p<newProduct.designData.sizeList.facadeSpecs.length;p++)switch(o=new newProduct.Dimension({dimensionId:newProduct.designData.sizeList.facadeSpecs[p].specsCateId,name:newProduct.designData.sizeList.facadeSpecs[p].name,type:newProduct.designData.sizeList.facadeSpecs[p].type,specsType:newProduct.designData.sizeList.facadeSpecs[p].specsType,specsObj:h}),newProduct.designData.sizeList.facadeSpecs[p].specsType){case 1:for(var g=0;g<newProduct.designData.sizeList.facadeSpecs[p].specs.length;g++)for(var v=0;v<newProduct.designData.glassData.glassFrame.length;v++)newProduct.designData.glassData.glassFrame[v].specsId==newProduct.designData.sizeList.facadeSpecs[p].specs[g].specsId&&(c=new t({detailId:newProduct.designData.sizeList.facadeSpecs[p].specs[g].specsId,des:newProduct.designData.sizeList.facadeSpecs[p].specs[g].des,specsImg:newProduct.designData.sizeList.facadeSpecs[p].specs[g].materialImg,materialImg:newProduct.designData.sizeList.facadeSpecs[p].specs[g].materialImg,materialSale:newProduct.designData.sizeList.facadeSpecs[p].specs[g].materialSale,dimensionObj:o,selectClass:"lowModel-specs-active",disableClass:"",disableSelectClass:"lowModel-specs-active",hypPDMax:newProduct.designData.glassData.glassFrame[v].framePd.hypPDMax,hypPDMin:newProduct.designData.glassData.glassFrame[v].framePd.hypPDMin,myoPDMax:newProduct.designData.glassData.glassFrame[v].framePd.myoPDMax,myoPDMin:newProduct.designData.glassData.glassFrame[v].framePd.myoPDMin}),c.setMaterial(),o.fileDetail(c));h.fileDimension(o);break;case 2:o.ele=$('<li class="specs-dimension"><p>镜片规格：</p><div class="stepTwo-detail"><span>无可用镜片规格，请选择其他镜片功能</span><ul></ul></div></li>'),o.detailCon=o.ele.find("ul");for(var g=0;g<newProduct.designData.sizeList.facadeSpecs[p].specs.length;g++)for(var u=0;u<newProduct.designData.glassData.glassInfo.length;u++)d=newProduct.designData.glassData.glassInfo[u],newProduct.designData.sizeList.facadeSpecs[p].specs[g].specsId==d.specsId&&(c=new i({detailId:newProduct.designData.sizeList.facadeSpecs[p].specs[g].specsId,des:newProduct.designData.sizeList.facadeSpecs[p].specs[g].des,specsImg:newProduct.designData.sizeList.facadeSpecs[p].specs[g].materialImg,materialImg:newProduct.designData.sizeList.facadeSpecs[p].specs[g].materialImg,materialSale:newProduct.designData.sizeList.facadeSpecs[p].specs[g].materialSale,dimensionObj:o,selectClass:"lowModel-specs-active",disableClass:"",disableSelectClass:"lowModel-specs-active",ele:$("<li><em></em><span>"+d.jpName+"</span><p>"+d.jpDes+"</p></li>"),isPlain:d.isPlain,isSpecial:d.isSpecial,hypMin:d.glassNum.hypMin,hypMax:d.glassNum.hypMax,myoMin:d.glassNum.myoMin,myoMax:d.glassNum.myoMax,astMin:d.glassNum.astMin,astMax:d.glassNum.astMax,axiMin:d.glassNum.axiMin,axiMax:d.glassNum.axiMax,glassLabelName:d.glassLabelName,jpDes:d.jpDes,jpName:d.jpName}),l.seriesList[d.glassLabelName]||(l.seriesList[d.glassLabelName]=new s({seriesName:d.glassLabelName,con:$(".stepTwo-series ul"),activeClass:"stepTwo-series-active"})),l.seriesList[d.glassLabelName].addChild(c),o.fileDetail(c));h.fileDimension(o,$(".stepTwo-main > ul"));break;case 3:default:for(var g=0;g<newProduct.designData.sizeList.facadeSpecs[p].specs.length;g++)c=new newProduct.SpecsDetail({detailId:newProduct.designData.sizeList.facadeSpecs[p].specs[g].specsId,des:newProduct.designData.sizeList.facadeSpecs[p].specs[g].des,specsImg:newProduct.designData.sizeList.facadeSpecs[p].specs[g].materialImg,materialImg:newProduct.designData.sizeList.facadeSpecs[p].specs[g].materialImg,materialSale:newProduct.designData.sizeList.facadeSpecs[p].specs[g].materialSale,dimensionObj:o,selectClass:"lowModel-specs-active",disableClass:"",disableSelectClass:"lowModel-specs-active"}),c.setMaterial(),o.fileDetail(c);h.fileDimension(o)}h.selectCallback=function(){a.fillModelImg(h.chooseData.randerImg),a.fillPicImg(h.chooseData.largeConfirmImg),n.setConsider({su:{price:h.chooseData.price,duration:h.chooseData.duration}})},h.setDes(),l.init(),$(".glassTab-hqb").click(function(){$(".glassTab-leg").removeClass("glassTab-active"),$(".glassMain-leg").removeClass("glassMain-active"),$(".glassTab-hqb").addClass("glassTab-active"),$(".glassMain-hqb").addClass("glassMain-active")}),$(".glassTab-leg").click(function(){$(".glassTab-hqb").removeClass("glassTab-active"),$(".glassMain-hqb").removeClass("glassMain-active"),$(".glassTab-leg").addClass("glassTab-active"),$(".glassMain-leg").addClass("glassMain-active")}),$(".editor-reset").click(function(){h.fileSelect(newProduct.designData.suData.specs),h.setDes(),a.modelIndex=6,a.fillModelImg(h.chooseData.randerImg),n.setConsider({su:{price:h.chooseData.price,duration:h.chooseData.duration}})});var f,m=newProduct.designData.glassData.supportRange.glassRange;0==m.myoMax&&0==m.hypMax?(f="仅支持平光",$(".bottom-degree").hide()):(f="支持",0==m.myoMax?(0!=m.hypMin&&(f+="远视"),f=f+100*m.hypMin+"度-远视"+100*m.hypMax+"度"):0==m.hypMax?(f=f+"近视"+100*m.myoMax+"度-",0!=m.myoMin&&(f+="近视"),f=f+100*m.myoMin+"度"):f=f+"近视"+100*m.myoMax+"度-远视"+100*m.hypMax+"度"),$(".panel-range div").html(f),$(".editor-3d").click(function(){$(document).dialogFn({title:"试戴",type:"confirm",width:"240px",content:'<div class="ar-dialog"><span></span><p>安装必要APP，体验真人试戴</p></div>',btnshow:!1})}),$(".editor-optometry").click(function(){$(document).dialogFn({title:"验光",type:"confirm",width:"240px",content:'<div class="ar-dialog"><span></span><p>安装必要APP，体验眼镜验光</p></div>',btnshow:!1})})});